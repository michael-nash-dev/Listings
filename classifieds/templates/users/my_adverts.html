{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h3>My Property Listings</h3>
    {% for p in properties %}
    <div class="card mb-3">
        <div class="card-body">
            <h5>{{ p.title }}</h5>
            <p>{{ p.description|truncatewords:20 }}</p>
            <p>Status: <strong>{{ p.status }}</strong></p>
            <a href="{% url 'edit_property' p.id %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'delete_property' p.id %}" class="btn btn-sm btn-danger">Delete</a>
            <form action="{% url 'toggle_visibility_property' p.id %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button class="btn btn-sm btn-warning">
                    {% if p.is_active %}Deactivate{% else %}Activate{% endif %}
                </button>
            </form>
        </div>
    </div>
    {% empty %}
    <p>You have not posted any properties.</p>
    {% endfor %}

    <div class="mt-3">
        <nav>
            <ul class="pagination">
                {% for num in properties.paginator.page_range %}
                <li class="page-item {% if properties.number == num %}active{% endif %}">
                    <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
                {% endfor %}
            </ul>
        </nav>
    </div>



    <hr>

    <h3>My Car Listings</h3>
    {% for car in cars %}
    <div class="card mb-3">
        <div class="card-body">
            <h5>{{ car.make }}</h5>
            <h5>{{ car.model }}</h5>
            <p>{{ car.description|truncatewords:20 }}</p>
            <p>Status: <strong>{{ car.status }}</strong></p>
            <a href="{% url 'edit_car' car.id %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'delete_car' car.id %}" class="btn btn-sm btn-danger">Delete</a>
            <form action="{% url 'toggle_visibility_car' car.id %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button class="btn btn-sm btn-warning">
                    {% if car.is_active %}Deactivate{% else %}Activate{% endif %}
                </button>
            </form>
        </div>
    </div>
    {% empty %}
    <p>No car adverts found.</p>
    {% endfor %}

    <div class="mt-3">
        <nav>
            <ul class="pagination">
                {% for num in cars.paginator.page_range %}
                <li class="page-item {% if cars.number == num %}active{% endif %}">
                    <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
                {% endfor %}
            </ul>
        </nav>
    </div>




    <hr>

    <h3>My Job Listings</h3>
    {% for job in jobs %}
    <div class="card mb-3">
        <div class="card-body">
            <h5>{{ job.title }}</h5>
            <p>{{ job.description|truncatewords:20 }}</p>
            <p>Status: <strong>{{ job.status }}</strong></p>
            <a href="{% url 'edit_job' job.id %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'delete_job' job.id %}" class="btn btn-sm btn-danger">Delete</a>
            <form action="{% url 'toggle_visibility_job' job.id %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button class="btn btn-sm btn-warning">
                    {% if job.is_active %}Deactivate{% else %}Activate{% endif %}
                </button>
            </form>
        </div>
    </div>
    {% empty %}
    <p>No job adverts found.</p>
    {% endfor %}
    <div class="mt-3">
        <nav>
            <ul class="pagination">
                {% for num in jobs.paginator.page_range %}
                <li class="page-item {% if jobs.number == num %}active{% endif %}">
                    <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
                {% endfor %}
            </ul>
        </nav>
    </div>
</div>

{% endblock %}